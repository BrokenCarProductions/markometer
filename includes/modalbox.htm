



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <title>modalbox.js at d4dcb2502aab88c9a3b34454d0ad265eeb203f1e from okonet's modalbox - GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub" />

    
      <link href="http://assets3.github.com/stylesheets/bundle.css?180c214baeba2d8a1194e7b48ea7581cfee3e505" media="screen" rel="stylesheet" type="text/css" />
    

    
      
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script src="http://assets2.github.com/javascripts/bundle.js?180c214baeba2d8a1194e7b48ea7581cfee3e505" type="text/javascript"></script>
      
    
    
  
    
  

  <link href="http://github.com/feeds/okonet/commits/modalbox/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e" rel="alternate" title="Recent Commits to modalbox:d4dcb2502aab88c9a3b34454d0ad265eeb203f1e" type="application/atom+xml" />

    <meta name="description" content="Mac OS X style javascript pop-ups for your browser (based on prototype + script.aculo.us)" />


    

    <script type="text/javascript">
      github_user = null
    </script>
  </head>

  

  <body>
    

    <div id="main">
      <div id="header" class="">
        <div class="site">
          <div class="logo">
            <a href="http://github.com"><img src="/images/modules/header/logov3.png" alt="github" /></a>
          </div>
          
            <div class="topsearch">
  <form action="/search" id="top_search_form" method="get">
    <input type="search" class="search" name="q" /> <input type="submit" value="Search" />
    <input type="hidden" name="type" value="Everything" />
    <input type="hidden" name="repo" value="" />
    <input type="hidden" name="langOverride" value="" />
    <input type="hidden" name="start_value" value="1" />
  </form>
  <div class="links">
    <a href="/repositories">Browse</a> | <a href="/guides">Guides</a> | <a href="/search">Advanced</a>
  </div>
</div>
          
            
              <div class="actions">
                
                  <a href="http://github.com">Home</a>
                  <a href="/plans"><b><u>Pricing and Signup</u></b></a>
                  <a href="http://github.com/popular/forked">Repositories</a>
                  
                  <a href="/blog">Blog</a>
                
                <a href="https://github.com/login">Login</a>
              </div>
            
        </div>
      </div>

      
        
    <div id="repo_menu">
      <div class="site">
        <ul>
          
            <li class="active"><a href="http://github.com/okonet/modalbox/tree/">Source</a></li>

            <li class=""><a href="http://github.com/okonet/modalbox/commits/">Commits</a></li>

            
            <li class=""><a href="/okonet/modalbox/network">Network (11)</a></li>

            

            
              
              <li class=""><a href="/okonet/modalbox/issues">Issues (4)</a></li>
            

            
              
              <li class=""><a href="/okonet/modalbox/downloads">Downloads (1)</a></li>
            

            
              
              <li class=""><a href="http://wiki.github.com/okonet/modalbox">Wiki (2)</a></li>
            

            <li class=""><a href="/okonet/modalbox/graphs">Graphs</a></li>

            

          
        </ul>
      </div>
    </div>

  <div id="repo_sub_menu">
    <div class="site">
      <div class="joiner"></div>
      

      

      

      
    </div>
  </div>

  <div class="site">
    





<div id="repos">
  


<script type="text/javascript">
  GitHub.currentCommitRef = "d4dcb2502aab88c9a3b34454d0ad265eeb203f1e"
  GitHub.currentRepoOwner = "okonet"
  GitHub.currentRepo = "modalbox"
  
</script>



  <div class="repo public" id="repo_details">
    <div class="title">
      <div class="path">
        <a href="/okonet">okonet</a> / <b><a href="http://github.com/okonet/modalbox/tree">modalbox</a></b>

        

          <span id="edit_button" style="display:none;">
            <a href="/okonet/modalbox/edit"><img alt="edit" class="button" src="http://assets2.github.com/images/modules/repos/edit_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
          </span>

          
            <span id="pull_request_button" style="display:none;">
              <a href="/okonet/modalbox/pull_request/" class="pull_request_button"><img alt="pull request" class="button" src="http://assets2.github.com/images/modules/repos/pull_request_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
            </span>
            
            <span id="fast_forward_button" style="display:none;">
              <a href="/okonet/modalbox/fast_forward" id="ff_button"><img alt="fast forward" class="button" src="http://assets1.github.com/images/modules/repos/fast_forward_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
            </span>

            <span id="fork_button">
              <a href="/okonet/modalbox/fork"><img alt="fork" class="button" src="http://assets2.github.com/images/modules/repos/fork_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
            </span>
          

          <span id="watch_button">
            <a href="/okonet/modalbox/toggle_watch" class="toggle_watch"><img alt="watch" class="button" src="http://assets2.github.com/images/modules/repos/watch_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
          </span>
          
          <span id="unwatch_button" style="display:none;">
            <a href="/okonet/modalbox/toggle_watch" class="toggle_watch"><img alt="watch" class="button" src="http://assets1.github.com/images/modules/repos/unwatch_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
          </span>

          
            <a href="#" id="download_button" rel="okonet/modalbox"><img alt="download tarball" class="button" src="http://assets0.github.com/images/modules/repos/download_button.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></a>
          
        
      </div>

      <div class="security private_security" style="display:none">
        <a href="#private_repo" rel="facebox"><img src="/images/icons/private.png" alt="private" /></a>
      </div>

      <div id="private_repo" class="hidden">
        This repository is private.
        All pages are served over SSL and all pushing and pulling is done over SSH.
        No one may fork, clone, or view it unless they are added as a <a href="/okonet/modalbox/edit">member</a>.

        <br/>
        <br/>
        Every repository with this icon (<img src="/images/icons/private.png" alt="private" />) is private.
      </div>

      <div class="security public_security" style="">
        <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
      </div>

      <div id="public_repo" class="hidden">
        This repository is public.
        Anyone may fork, clone, or view it.

        <br/>
        <br/>
        Every repository with this icon (<img src="/images/icons/public.png" alt="public" />) is public.
      </div>

      

        <div class="flexipill">
          <a href="/okonet/modalbox/network">
          <table cellpadding="0" cellspacing="0">
            <tr><td><img alt="Forks" src="http://assets3.github.com/images/modules/repos/pills/forks.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></td><td class="middle"><span>11</span></td><td><img alt="Right" src="http://assets3.github.com/images/modules/repos/pills/right.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></td></tr>
          </table>
          </a>
        </div>

        <div class="flexipill">
          <a href="/okonet/modalbox/watchers">
          <table cellpadding="0" cellspacing="0">
            <tr><td><img alt="Watchers" src="http://assets2.github.com/images/modules/repos/pills/watchers.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></td><td class="middle"><span>56</span></td><td><img alt="Right" src="http://assets3.github.com/images/modules/repos/pills/right.png?180c214baeba2d8a1194e7b48ea7581cfee3e505" /></td></tr>
          </table>
          </a>
        </div>
      </div>

    <div class="meta">
      <table>
        
        <tr>
          <td class="label">Description:</td>
          <td>
            <span id="repository_description" rel="/okonet/modalbox/edit/update">Mac OS X style javascript pop-ups for your browser (based on prototype + script.aculo.us)</span>
            <a href="#description" class="edit_link action" style="display:none;">edit</a>
          </td>
        </tr>

        
            <tr>
              <td class="label">Homepage:</td>
              <td>
                                
                <span id="repository_homepage" rel="/okonet/modalbox/edit/update">
                  <a href="http://okonet.ru/projects/modalbox">http://okonet.ru/projects/modalbox</a>
                </span>
                <a href="#homepage" class="edit_link action" style="display:none;">edit</a>
              </td>
            </tr>

          
            <tr>
              <td class="label"><span id="public_clone_text" style="display:none;">Public&nbsp;</span>Clone&nbsp;URL:</td>
              
              <td>
                <a href="git://github.com/okonet/modalbox.git" class="git_url_facebox" rel="#git-clone">git://github.com/okonet/modalbox.git</a>
                      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              class="clippy"
              id="clippy" >
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="text=git://github.com/okonet/modalbox.git">
      <param name="bgcolor" value="#F0F0F0">
      <param name="wmode" value="opaque">
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=git://github.com/okonet/modalbox.git"
             bgcolor="#F0F0F0"
             wmode="opaque"
      />
      </object>

                <div id="git-clone" style="display:none;">
                  Give this clone URL to anyone.
                  <br/>
                  <code>git clone git://github.com/okonet/modalbox.git </code>
                </div>
              </td>
            </tr>
          
          
          <tr id="private_clone_url" style="display:none;">
            <td class="label">Your Clone URL:</td>
            
            <td>

              <div id="private-clone-url">
                <a href="git@github.com:okonet/modalbox.git" class="git_url_facebox" rel="#your-git-clone">git@github.com:okonet/modalbox.git</a>
                <input type="text" value="git@github.com:okonet/modalbox.git" style="display: none;" />
                      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              class="clippy"
              id="clippy" >
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="text=git@github.com:okonet/modalbox.git">
      <param name="bgcolor" value="#F0F0F0">
      <param name="wmode" value="opaque">
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=git@github.com:okonet/modalbox.git"
             bgcolor="#F0F0F0"
             wmode="opaque"
      />
      </object>

              </div>

              <div id="your-git-clone" style="display:none;">
                Use this clone URL yourself.
                <br/>
                <code>git clone git@github.com:okonet/modalbox.git </code>
              </div>
            </td>
          </tr>
          
          

          

          
      </table>

      
        <div class="pledgie">
          <a href='http://pledgie.com/campaigns/1686'><img alt='Click here to lend your support to: modalbox and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/1686.png?skin_name=chrome' border='0' /></a>
        </div>
          </div>
  </div>






</div>


  <div id="commit">
    <div class="group">
        
  <div class="envelope commit">
    <div class="human">
      
        <div class="message"><pre><a href="/okonet/modalbox/commit/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e">Fixed width bug</a> </pre></div>
      

      <div class="actor">
        <div class="gravatar">
          
          <img alt="" height="30" src="http://www.gravatar.com/avatar/8cdcbe27173f6f9a8023ba47be9e777d?s=30&amp;d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-30.png" width="30" />
        </div>
        <div class="name">exby <span>(author)</span></div>
          <div class="date">
            <abbr class="relatize" title="2009-05-24 05:42:25">Sun May 24 05:42:25 -0700 2009</abbr> 
          </div>
      </div>
  
      
  
    </div>
    <div class="machine">
      <span>c</span>ommit&nbsp;&nbsp;<a href="/okonet/modalbox/commit/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e" hotkey="c">d4dcb2502aab88c9a3b34454d0ad265eeb203f1e</a><br />
      <span>t</span>ree&nbsp;&nbsp;&nbsp;&nbsp;<a href="/okonet/modalbox/tree/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e" hotkey="t">c7c20a03bc8384adf79d520e10f611022b5eb52d</a><br />
  
      
        <span>p</span>arent&nbsp;
        
        <a href="/okonet/modalbox/tree/796003b1c4bc237f37847fbc0c5caac4a7c860f5" hotkey="p">796003b1c4bc237f37847fbc0c5caac4a7c860f5</a>
      
  
    </div>
  </div>

    </div>
  </div>



  
    <div id="path">
      <b><a href="/okonet/modalbox/tree/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e">modalbox</a></b> / modalbox.js       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              class="clippy"
              id="clippy" >
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param NAME="FlashVars" value="text=modalbox.js">
      <param name="bgcolor" value="#FFFFFF">
      <param name="wmode" value="opaque">
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=modalbox.js"
             bgcolor="#FFFFFF"
             wmode="opaque"
      />
      </object>

    </div>

    <div id="files">
      <div class="file">
        <div class="meta">
          <div class="info">
            <span>100755</span>
            <span>502 lines (448 sloc)</span>
            <span>20.172 kb</span>
          </div>
          <div class="actions">
            
            <a href="/okonet/modalbox/raw/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e/modalbox.js" id="raw-url">raw</a>
            
              <a href="/okonet/modalbox/blame/d4dcb2502aab88c9a3b34454d0ad265eeb203f1e/modalbox.js">blame</a>
            
            <a href="/okonet/modalbox/commits/master/modalbox.js">history</a>
          </div>
        </div>
        
  <div class="data syntax">
    
      <table cellpadding="0" cellspacing="0">
        <tr>
          <td>
            
            <pre class="line_numbers">
<span id="LID1" rel="#L1">1</span>
<span id="LID2" rel="#L2">2</span>
<span id="LID3" rel="#L3">3</span>
<span id="LID4" rel="#L4">4</span>
<span id="LID5" rel="#L5">5</span>
<span id="LID6" rel="#L6">6</span>
<span id="LID7" rel="#L7">7</span>
<span id="LID8" rel="#L8">8</span>
<span id="LID9" rel="#L9">9</span>
<span id="LID10" rel="#L10">10</span>
<span id="LID11" rel="#L11">11</span>
<span id="LID12" rel="#L12">12</span>
<span id="LID13" rel="#L13">13</span>
<span id="LID14" rel="#L14">14</span>
<span id="LID15" rel="#L15">15</span>
<span id="LID16" rel="#L16">16</span>
<span id="LID17" rel="#L17">17</span>
<span id="LID18" rel="#L18">18</span>
<span id="LID19" rel="#L19">19</span>
<span id="LID20" rel="#L20">20</span>
<span id="LID21" rel="#L21">21</span>
<span id="LID22" rel="#L22">22</span>
<span id="LID23" rel="#L23">23</span>
<span id="LID24" rel="#L24">24</span>
<span id="LID25" rel="#L25">25</span>
<span id="LID26" rel="#L26">26</span>
<span id="LID27" rel="#L27">27</span>
<span id="LID28" rel="#L28">28</span>
<span id="LID29" rel="#L29">29</span>
<span id="LID30" rel="#L30">30</span>
<span id="LID31" rel="#L31">31</span>
<span id="LID32" rel="#L32">32</span>
<span id="LID33" rel="#L33">33</span>
<span id="LID34" rel="#L34">34</span>
<span id="LID35" rel="#L35">35</span>
<span id="LID36" rel="#L36">36</span>
<span id="LID37" rel="#L37">37</span>
<span id="LID38" rel="#L38">38</span>
<span id="LID39" rel="#L39">39</span>
<span id="LID40" rel="#L40">40</span>
<span id="LID41" rel="#L41">41</span>
<span id="LID42" rel="#L42">42</span>
<span id="LID43" rel="#L43">43</span>
<span id="LID44" rel="#L44">44</span>
<span id="LID45" rel="#L45">45</span>
<span id="LID46" rel="#L46">46</span>
<span id="LID47" rel="#L47">47</span>
<span id="LID48" rel="#L48">48</span>
<span id="LID49" rel="#L49">49</span>
<span id="LID50" rel="#L50">50</span>
<span id="LID51" rel="#L51">51</span>
<span id="LID52" rel="#L52">52</span>
<span id="LID53" rel="#L53">53</span>
<span id="LID54" rel="#L54">54</span>
<span id="LID55" rel="#L55">55</span>
<span id="LID56" rel="#L56">56</span>
<span id="LID57" rel="#L57">57</span>
<span id="LID58" rel="#L58">58</span>
<span id="LID59" rel="#L59">59</span>
<span id="LID60" rel="#L60">60</span>
<span id="LID61" rel="#L61">61</span>
<span id="LID62" rel="#L62">62</span>
<span id="LID63" rel="#L63">63</span>
<span id="LID64" rel="#L64">64</span>
<span id="LID65" rel="#L65">65</span>
<span id="LID66" rel="#L66">66</span>
<span id="LID67" rel="#L67">67</span>
<span id="LID68" rel="#L68">68</span>
<span id="LID69" rel="#L69">69</span>
<span id="LID70" rel="#L70">70</span>
<span id="LID71" rel="#L71">71</span>
<span id="LID72" rel="#L72">72</span>
<span id="LID73" rel="#L73">73</span>
<span id="LID74" rel="#L74">74</span>
<span id="LID75" rel="#L75">75</span>
<span id="LID76" rel="#L76">76</span>
<span id="LID77" rel="#L77">77</span>
<span id="LID78" rel="#L78">78</span>
<span id="LID79" rel="#L79">79</span>
<span id="LID80" rel="#L80">80</span>
<span id="LID81" rel="#L81">81</span>
<span id="LID82" rel="#L82">82</span>
<span id="LID83" rel="#L83">83</span>
<span id="LID84" rel="#L84">84</span>
<span id="LID85" rel="#L85">85</span>
<span id="LID86" rel="#L86">86</span>
<span id="LID87" rel="#L87">87</span>
<span id="LID88" rel="#L88">88</span>
<span id="LID89" rel="#L89">89</span>
<span id="LID90" rel="#L90">90</span>
<span id="LID91" rel="#L91">91</span>
<span id="LID92" rel="#L92">92</span>
<span id="LID93" rel="#L93">93</span>
<span id="LID94" rel="#L94">94</span>
<span id="LID95" rel="#L95">95</span>
<span id="LID96" rel="#L96">96</span>
<span id="LID97" rel="#L97">97</span>
<span id="LID98" rel="#L98">98</span>
<span id="LID99" rel="#L99">99</span>
<span id="LID100" rel="#L100">100</span>
<span id="LID101" rel="#L101">101</span>
<span id="LID102" rel="#L102">102</span>
<span id="LID103" rel="#L103">103</span>
<span id="LID104" rel="#L104">104</span>
<span id="LID105" rel="#L105">105</span>
<span id="LID106" rel="#L106">106</span>
<span id="LID107" rel="#L107">107</span>
<span id="LID108" rel="#L108">108</span>
<span id="LID109" rel="#L109">109</span>
<span id="LID110" rel="#L110">110</span>
<span id="LID111" rel="#L111">111</span>
<span id="LID112" rel="#L112">112</span>
<span id="LID113" rel="#L113">113</span>
<span id="LID114" rel="#L114">114</span>
<span id="LID115" rel="#L115">115</span>
<span id="LID116" rel="#L116">116</span>
<span id="LID117" rel="#L117">117</span>
<span id="LID118" rel="#L118">118</span>
<span id="LID119" rel="#L119">119</span>
<span id="LID120" rel="#L120">120</span>
<span id="LID121" rel="#L121">121</span>
<span id="LID122" rel="#L122">122</span>
<span id="LID123" rel="#L123">123</span>
<span id="LID124" rel="#L124">124</span>
<span id="LID125" rel="#L125">125</span>
<span id="LID126" rel="#L126">126</span>
<span id="LID127" rel="#L127">127</span>
<span id="LID128" rel="#L128">128</span>
<span id="LID129" rel="#L129">129</span>
<span id="LID130" rel="#L130">130</span>
<span id="LID131" rel="#L131">131</span>
<span id="LID132" rel="#L132">132</span>
<span id="LID133" rel="#L133">133</span>
<span id="LID134" rel="#L134">134</span>
<span id="LID135" rel="#L135">135</span>
<span id="LID136" rel="#L136">136</span>
<span id="LID137" rel="#L137">137</span>
<span id="LID138" rel="#L138">138</span>
<span id="LID139" rel="#L139">139</span>
<span id="LID140" rel="#L140">140</span>
<span id="LID141" rel="#L141">141</span>
<span id="LID142" rel="#L142">142</span>
<span id="LID143" rel="#L143">143</span>
<span id="LID144" rel="#L144">144</span>
<span id="LID145" rel="#L145">145</span>
<span id="LID146" rel="#L146">146</span>
<span id="LID147" rel="#L147">147</span>
<span id="LID148" rel="#L148">148</span>
<span id="LID149" rel="#L149">149</span>
<span id="LID150" rel="#L150">150</span>
<span id="LID151" rel="#L151">151</span>
<span id="LID152" rel="#L152">152</span>
<span id="LID153" rel="#L153">153</span>
<span id="LID154" rel="#L154">154</span>
<span id="LID155" rel="#L155">155</span>
<span id="LID156" rel="#L156">156</span>
<span id="LID157" rel="#L157">157</span>
<span id="LID158" rel="#L158">158</span>
<span id="LID159" rel="#L159">159</span>
<span id="LID160" rel="#L160">160</span>
<span id="LID161" rel="#L161">161</span>
<span id="LID162" rel="#L162">162</span>
<span id="LID163" rel="#L163">163</span>
<span id="LID164" rel="#L164">164</span>
<span id="LID165" rel="#L165">165</span>
<span id="LID166" rel="#L166">166</span>
<span id="LID167" rel="#L167">167</span>
<span id="LID168" rel="#L168">168</span>
<span id="LID169" rel="#L169">169</span>
<span id="LID170" rel="#L170">170</span>
<span id="LID171" rel="#L171">171</span>
<span id="LID172" rel="#L172">172</span>
<span id="LID173" rel="#L173">173</span>
<span id="LID174" rel="#L174">174</span>
<span id="LID175" rel="#L175">175</span>
<span id="LID176" rel="#L176">176</span>
<span id="LID177" rel="#L177">177</span>
<span id="LID178" rel="#L178">178</span>
<span id="LID179" rel="#L179">179</span>
<span id="LID180" rel="#L180">180</span>
<span id="LID181" rel="#L181">181</span>
<span id="LID182" rel="#L182">182</span>
<span id="LID183" rel="#L183">183</span>
<span id="LID184" rel="#L184">184</span>
<span id="LID185" rel="#L185">185</span>
<span id="LID186" rel="#L186">186</span>
<span id="LID187" rel="#L187">187</span>
<span id="LID188" rel="#L188">188</span>
<span id="LID189" rel="#L189">189</span>
<span id="LID190" rel="#L190">190</span>
<span id="LID191" rel="#L191">191</span>
<span id="LID192" rel="#L192">192</span>
<span id="LID193" rel="#L193">193</span>
<span id="LID194" rel="#L194">194</span>
<span id="LID195" rel="#L195">195</span>
<span id="LID196" rel="#L196">196</span>
<span id="LID197" rel="#L197">197</span>
<span id="LID198" rel="#L198">198</span>
<span id="LID199" rel="#L199">199</span>
<span id="LID200" rel="#L200">200</span>
<span id="LID201" rel="#L201">201</span>
<span id="LID202" rel="#L202">202</span>
<span id="LID203" rel="#L203">203</span>
<span id="LID204" rel="#L204">204</span>
<span id="LID205" rel="#L205">205</span>
<span id="LID206" rel="#L206">206</span>
<span id="LID207" rel="#L207">207</span>
<span id="LID208" rel="#L208">208</span>
<span id="LID209" rel="#L209">209</span>
<span id="LID210" rel="#L210">210</span>
<span id="LID211" rel="#L211">211</span>
<span id="LID212" rel="#L212">212</span>
<span id="LID213" rel="#L213">213</span>
<span id="LID214" rel="#L214">214</span>
<span id="LID215" rel="#L215">215</span>
<span id="LID216" rel="#L216">216</span>
<span id="LID217" rel="#L217">217</span>
<span id="LID218" rel="#L218">218</span>
<span id="LID219" rel="#L219">219</span>
<span id="LID220" rel="#L220">220</span>
<span id="LID221" rel="#L221">221</span>
<span id="LID222" rel="#L222">222</span>
<span id="LID223" rel="#L223">223</span>
<span id="LID224" rel="#L224">224</span>
<span id="LID225" rel="#L225">225</span>
<span id="LID226" rel="#L226">226</span>
<span id="LID227" rel="#L227">227</span>
<span id="LID228" rel="#L228">228</span>
<span id="LID229" rel="#L229">229</span>
<span id="LID230" rel="#L230">230</span>
<span id="LID231" rel="#L231">231</span>
<span id="LID232" rel="#L232">232</span>
<span id="LID233" rel="#L233">233</span>
<span id="LID234" rel="#L234">234</span>
<span id="LID235" rel="#L235">235</span>
<span id="LID236" rel="#L236">236</span>
<span id="LID237" rel="#L237">237</span>
<span id="LID238" rel="#L238">238</span>
<span id="LID239" rel="#L239">239</span>
<span id="LID240" rel="#L240">240</span>
<span id="LID241" rel="#L241">241</span>
<span id="LID242" rel="#L242">242</span>
<span id="LID243" rel="#L243">243</span>
<span id="LID244" rel="#L244">244</span>
<span id="LID245" rel="#L245">245</span>
<span id="LID246" rel="#L246">246</span>
<span id="LID247" rel="#L247">247</span>
<span id="LID248" rel="#L248">248</span>
<span id="LID249" rel="#L249">249</span>
<span id="LID250" rel="#L250">250</span>
<span id="LID251" rel="#L251">251</span>
<span id="LID252" rel="#L252">252</span>
<span id="LID253" rel="#L253">253</span>
<span id="LID254" rel="#L254">254</span>
<span id="LID255" rel="#L255">255</span>
<span id="LID256" rel="#L256">256</span>
<span id="LID257" rel="#L257">257</span>
<span id="LID258" rel="#L258">258</span>
<span id="LID259" rel="#L259">259</span>
<span id="LID260" rel="#L260">260</span>
<span id="LID261" rel="#L261">261</span>
<span id="LID262" rel="#L262">262</span>
<span id="LID263" rel="#L263">263</span>
<span id="LID264" rel="#L264">264</span>
<span id="LID265" rel="#L265">265</span>
<span id="LID266" rel="#L266">266</span>
<span id="LID267" rel="#L267">267</span>
<span id="LID268" rel="#L268">268</span>
<span id="LID269" rel="#L269">269</span>
<span id="LID270" rel="#L270">270</span>
<span id="LID271" rel="#L271">271</span>
<span id="LID272" rel="#L272">272</span>
<span id="LID273" rel="#L273">273</span>
<span id="LID274" rel="#L274">274</span>
<span id="LID275" rel="#L275">275</span>
<span id="LID276" rel="#L276">276</span>
<span id="LID277" rel="#L277">277</span>
<span id="LID278" rel="#L278">278</span>
<span id="LID279" rel="#L279">279</span>
<span id="LID280" rel="#L280">280</span>
<span id="LID281" rel="#L281">281</span>
<span id="LID282" rel="#L282">282</span>
<span id="LID283" rel="#L283">283</span>
<span id="LID284" rel="#L284">284</span>
<span id="LID285" rel="#L285">285</span>
<span id="LID286" rel="#L286">286</span>
<span id="LID287" rel="#L287">287</span>
<span id="LID288" rel="#L288">288</span>
<span id="LID289" rel="#L289">289</span>
<span id="LID290" rel="#L290">290</span>
<span id="LID291" rel="#L291">291</span>
<span id="LID292" rel="#L292">292</span>
<span id="LID293" rel="#L293">293</span>
<span id="LID294" rel="#L294">294</span>
<span id="LID295" rel="#L295">295</span>
<span id="LID296" rel="#L296">296</span>
<span id="LID297" rel="#L297">297</span>
<span id="LID298" rel="#L298">298</span>
<span id="LID299" rel="#L299">299</span>
<span id="LID300" rel="#L300">300</span>
<span id="LID301" rel="#L301">301</span>
<span id="LID302" rel="#L302">302</span>
<span id="LID303" rel="#L303">303</span>
<span id="LID304" rel="#L304">304</span>
<span id="LID305" rel="#L305">305</span>
<span id="LID306" rel="#L306">306</span>
<span id="LID307" rel="#L307">307</span>
<span id="LID308" rel="#L308">308</span>
<span id="LID309" rel="#L309">309</span>
<span id="LID310" rel="#L310">310</span>
<span id="LID311" rel="#L311">311</span>
<span id="LID312" rel="#L312">312</span>
<span id="LID313" rel="#L313">313</span>
<span id="LID314" rel="#L314">314</span>
<span id="LID315" rel="#L315">315</span>
<span id="LID316" rel="#L316">316</span>
<span id="LID317" rel="#L317">317</span>
<span id="LID318" rel="#L318">318</span>
<span id="LID319" rel="#L319">319</span>
<span id="LID320" rel="#L320">320</span>
<span id="LID321" rel="#L321">321</span>
<span id="LID322" rel="#L322">322</span>
<span id="LID323" rel="#L323">323</span>
<span id="LID324" rel="#L324">324</span>
<span id="LID325" rel="#L325">325</span>
<span id="LID326" rel="#L326">326</span>
<span id="LID327" rel="#L327">327</span>
<span id="LID328" rel="#L328">328</span>
<span id="LID329" rel="#L329">329</span>
<span id="LID330" rel="#L330">330</span>
<span id="LID331" rel="#L331">331</span>
<span id="LID332" rel="#L332">332</span>
<span id="LID333" rel="#L333">333</span>
<span id="LID334" rel="#L334">334</span>
<span id="LID335" rel="#L335">335</span>
<span id="LID336" rel="#L336">336</span>
<span id="LID337" rel="#L337">337</span>
<span id="LID338" rel="#L338">338</span>
<span id="LID339" rel="#L339">339</span>
<span id="LID340" rel="#L340">340</span>
<span id="LID341" rel="#L341">341</span>
<span id="LID342" rel="#L342">342</span>
<span id="LID343" rel="#L343">343</span>
<span id="LID344" rel="#L344">344</span>
<span id="LID345" rel="#L345">345</span>
<span id="LID346" rel="#L346">346</span>
<span id="LID347" rel="#L347">347</span>
<span id="LID348" rel="#L348">348</span>
<span id="LID349" rel="#L349">349</span>
<span id="LID350" rel="#L350">350</span>
<span id="LID351" rel="#L351">351</span>
<span id="LID352" rel="#L352">352</span>
<span id="LID353" rel="#L353">353</span>
<span id="LID354" rel="#L354">354</span>
<span id="LID355" rel="#L355">355</span>
<span id="LID356" rel="#L356">356</span>
<span id="LID357" rel="#L357">357</span>
<span id="LID358" rel="#L358">358</span>
<span id="LID359" rel="#L359">359</span>
<span id="LID360" rel="#L360">360</span>
<span id="LID361" rel="#L361">361</span>
<span id="LID362" rel="#L362">362</span>
<span id="LID363" rel="#L363">363</span>
<span id="LID364" rel="#L364">364</span>
<span id="LID365" rel="#L365">365</span>
<span id="LID366" rel="#L366">366</span>
<span id="LID367" rel="#L367">367</span>
<span id="LID368" rel="#L368">368</span>
<span id="LID369" rel="#L369">369</span>
<span id="LID370" rel="#L370">370</span>
<span id="LID371" rel="#L371">371</span>
<span id="LID372" rel="#L372">372</span>
<span id="LID373" rel="#L373">373</span>
<span id="LID374" rel="#L374">374</span>
<span id="LID375" rel="#L375">375</span>
<span id="LID376" rel="#L376">376</span>
<span id="LID377" rel="#L377">377</span>
<span id="LID378" rel="#L378">378</span>
<span id="LID379" rel="#L379">379</span>
<span id="LID380" rel="#L380">380</span>
<span id="LID381" rel="#L381">381</span>
<span id="LID382" rel="#L382">382</span>
<span id="LID383" rel="#L383">383</span>
<span id="LID384" rel="#L384">384</span>
<span id="LID385" rel="#L385">385</span>
<span id="LID386" rel="#L386">386</span>
<span id="LID387" rel="#L387">387</span>
<span id="LID388" rel="#L388">388</span>
<span id="LID389" rel="#L389">389</span>
<span id="LID390" rel="#L390">390</span>
<span id="LID391" rel="#L391">391</span>
<span id="LID392" rel="#L392">392</span>
<span id="LID393" rel="#L393">393</span>
<span id="LID394" rel="#L394">394</span>
<span id="LID395" rel="#L395">395</span>
<span id="LID396" rel="#L396">396</span>
<span id="LID397" rel="#L397">397</span>
<span id="LID398" rel="#L398">398</span>
<span id="LID399" rel="#L399">399</span>
<span id="LID400" rel="#L400">400</span>
<span id="LID401" rel="#L401">401</span>
<span id="LID402" rel="#L402">402</span>
<span id="LID403" rel="#L403">403</span>
<span id="LID404" rel="#L404">404</span>
<span id="LID405" rel="#L405">405</span>
<span id="LID406" rel="#L406">406</span>
<span id="LID407" rel="#L407">407</span>
<span id="LID408" rel="#L408">408</span>
<span id="LID409" rel="#L409">409</span>
<span id="LID410" rel="#L410">410</span>
<span id="LID411" rel="#L411">411</span>
<span id="LID412" rel="#L412">412</span>
<span id="LID413" rel="#L413">413</span>
<span id="LID414" rel="#L414">414</span>
<span id="LID415" rel="#L415">415</span>
<span id="LID416" rel="#L416">416</span>
<span id="LID417" rel="#L417">417</span>
<span id="LID418" rel="#L418">418</span>
<span id="LID419" rel="#L419">419</span>
<span id="LID420" rel="#L420">420</span>
<span id="LID421" rel="#L421">421</span>
<span id="LID422" rel="#L422">422</span>
<span id="LID423" rel="#L423">423</span>
<span id="LID424" rel="#L424">424</span>
<span id="LID425" rel="#L425">425</span>
<span id="LID426" rel="#L426">426</span>
<span id="LID427" rel="#L427">427</span>
<span id="LID428" rel="#L428">428</span>
<span id="LID429" rel="#L429">429</span>
<span id="LID430" rel="#L430">430</span>
<span id="LID431" rel="#L431">431</span>
<span id="LID432" rel="#L432">432</span>
<span id="LID433" rel="#L433">433</span>
<span id="LID434" rel="#L434">434</span>
<span id="LID435" rel="#L435">435</span>
<span id="LID436" rel="#L436">436</span>
<span id="LID437" rel="#L437">437</span>
<span id="LID438" rel="#L438">438</span>
<span id="LID439" rel="#L439">439</span>
<span id="LID440" rel="#L440">440</span>
<span id="LID441" rel="#L441">441</span>
<span id="LID442" rel="#L442">442</span>
<span id="LID443" rel="#L443">443</span>
<span id="LID444" rel="#L444">444</span>
<span id="LID445" rel="#L445">445</span>
<span id="LID446" rel="#L446">446</span>
<span id="LID447" rel="#L447">447</span>
<span id="LID448" rel="#L448">448</span>
<span id="LID449" rel="#L449">449</span>
<span id="LID450" rel="#L450">450</span>
<span id="LID451" rel="#L451">451</span>
<span id="LID452" rel="#L452">452</span>
<span id="LID453" rel="#L453">453</span>
<span id="LID454" rel="#L454">454</span>
<span id="LID455" rel="#L455">455</span>
<span id="LID456" rel="#L456">456</span>
<span id="LID457" rel="#L457">457</span>
<span id="LID458" rel="#L458">458</span>
<span id="LID459" rel="#L459">459</span>
<span id="LID460" rel="#L460">460</span>
<span id="LID461" rel="#L461">461</span>
<span id="LID462" rel="#L462">462</span>
<span id="LID463" rel="#L463">463</span>
<span id="LID464" rel="#L464">464</span>
<span id="LID465" rel="#L465">465</span>
<span id="LID466" rel="#L466">466</span>
<span id="LID467" rel="#L467">467</span>
<span id="LID468" rel="#L468">468</span>
<span id="LID469" rel="#L469">469</span>
<span id="LID470" rel="#L470">470</span>
<span id="LID471" rel="#L471">471</span>
<span id="LID472" rel="#L472">472</span>
<span id="LID473" rel="#L473">473</span>
<span id="LID474" rel="#L474">474</span>
<span id="LID475" rel="#L475">475</span>
<span id="LID476" rel="#L476">476</span>
<span id="LID477" rel="#L477">477</span>
<span id="LID478" rel="#L478">478</span>
<span id="LID479" rel="#L479">479</span>
<span id="LID480" rel="#L480">480</span>
<span id="LID481" rel="#L481">481</span>
<span id="LID482" rel="#L482">482</span>
<span id="LID483" rel="#L483">483</span>
<span id="LID484" rel="#L484">484</span>
<span id="LID485" rel="#L485">485</span>
<span id="LID486" rel="#L486">486</span>
<span id="LID487" rel="#L487">487</span>
<span id="LID488" rel="#L488">488</span>
<span id="LID489" rel="#L489">489</span>
<span id="LID490" rel="#L490">490</span>
<span id="LID491" rel="#L491">491</span>
<span id="LID492" rel="#L492">492</span>
<span id="LID493" rel="#L493">493</span>
<span id="LID494" rel="#L494">494</span>
<span id="LID495" rel="#L495">495</span>
<span id="LID496" rel="#L496">496</span>
<span id="LID497" rel="#L497">497</span>
<span id="LID498" rel="#L498">498</span>
<span id="LID499" rel="#L499">499</span>
<span id="LID500" rel="#L500">500</span>
<span id="LID501" rel="#L501">501</span>
<span id="LID502" rel="#L502">502</span>
</pre>
          </td>
          <td width="100%">
            
            
              <div class="highlight"><pre><div class="line" id="LC1"><span class="c">/*</span></div><div class="line" id="LC2"><span class="c">ModalBox - The pop-up window thingie with AJAX, based on prototype and script.aculo.us.</span></div><div class="line" id="LC3">&nbsp;</div><div class="line" id="LC4"><span class="c">Copyright Andrey Okonetchnikov (andrej.okonetschnikow@gmail.com), 2006-2007</span></div><div class="line" id="LC5"><span class="c">All rights reserved.</span></div><div class="line" id="LC6"><span class="c"> </span></div><div class="line" id="LC7"><span class="c">VERSION 1.6.1</span></div><div class="line" id="LC8"><span class="c">Last Modified: 04/13/2008</span></div><div class="line" id="LC9"><span class="c">*/</span></div><div class="line" id="LC10">&nbsp;</div><div class="line" id="LC11"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">Modalbox</span><span class="p">)</span></div><div class="line" id="LC12">	<span class="kd">var</span> <span class="nx">Modalbox</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span></div><div class="line" id="LC13">&nbsp;</div><div class="line" id="LC14"><span class="nx">Modalbox</span><span class="p">.</span><span class="nx">Methods</span> <span class="o">=</span> <span class="p">{</span></div><div class="line" id="LC15">	<span class="nx">overrideAlert</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span> <span class="c">// Override standard browser alert message with ModalBox</span></div><div class="line" id="LC16">	<span class="nx">focusableElements</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Array</span><span class="o">,</span></div><div class="line" id="LC17">	<span class="nx">currFocused</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span></div><div class="line" id="LC18">	<span class="nx">initialized</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span></div><div class="line" id="LC19">	<span class="nx">active</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span></div><div class="line" id="LC20">	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span></div><div class="line" id="LC21">		<span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;ModalBox Window&quot;</span><span class="o">,</span> <span class="c">// Title of the ModalBox window</span></div><div class="line" id="LC22">		<span class="nx">overlayClose</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span> <span class="c">// Close modal box by clicking on overlay</span></div><div class="line" id="LC23">		<span class="nx">width</span><span class="o">:</span> <span class="mi">500</span><span class="o">,</span> <span class="c">// Default width in px</span></div><div class="line" id="LC24">		<span class="nx">height</span><span class="o">:</span> <span class="mi">90</span><span class="o">,</span> <span class="c">// Default height in px</span></div><div class="line" id="LC25">		<span class="nx">overlayOpacity</span><span class="o">:</span> <span class="p">.</span><span class="mi">65</span><span class="o">,</span> <span class="c">// Default overlay opacity</span></div><div class="line" id="LC26">		<span class="nx">overlayDuration</span><span class="o">:</span> <span class="p">.</span><span class="mi">25</span><span class="o">,</span> <span class="c">// Default overlay fade in/out duration in seconds</span></div><div class="line" id="LC27">		<span class="nx">slideDownDuration</span><span class="o">:</span> <span class="p">.</span><span class="mi">5</span><span class="o">,</span> <span class="c">// Default Modalbox appear slide down effect in seconds</span></div><div class="line" id="LC28">		<span class="nx">slideUpDuration</span><span class="o">:</span> <span class="p">.</span><span class="mi">5</span><span class="o">,</span> <span class="c">// Default Modalbox hiding slide up effect in seconds</span></div><div class="line" id="LC29">		<span class="nx">resizeDuration</span><span class="o">:</span> <span class="p">.</span><span class="mi">25</span><span class="o">,</span> <span class="c">// Default resize duration seconds</span></div><div class="line" id="LC30">		<span class="nx">inactiveFade</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span> <span class="c">// Fades MB window on inactive state</span></div><div class="line" id="LC31">		<span class="nx">transitions</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span> <span class="c">// Toggles transition effects. Transitions are enabled by default</span></div><div class="line" id="LC32">		<span class="nx">loadingString</span><span class="o">:</span> <span class="s2">&quot;Please wait. Loading...&quot;</span><span class="o">,</span> <span class="c">// Default loading string message</span></div><div class="line" id="LC33">		<span class="nx">closeString</span><span class="o">:</span> <span class="s2">&quot;Close window&quot;</span><span class="o">,</span> <span class="c">// Default title attribute for close window link</span></div><div class="line" id="LC34">		<span class="nx">closeValue</span><span class="o">:</span> <span class="s2">&quot;&amp;times;&quot;</span><span class="o">,</span> <span class="c">// Default string for close link in the header</span></div><div class="line" id="LC35">		<span class="nx">params</span><span class="o">:</span> <span class="p">{}</span><span class="o">,</span></div><div class="line" id="LC36">		<span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="o">,</span> <span class="c">// Default Ajax request method</span></div><div class="line" id="LC37">		<span class="nx">autoFocusing</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span> <span class="c">// Toggles auto-focusing for form elements. Disable for long text pages.</span></div><div class="line" id="LC38">		<span class="nx">aspnet</span><span class="o">:</span> <span class="kc">false</span> <span class="c">// Should be use then using with ASP.NET costrols. Then true Modalbox window will be injected into the first form element.</span></div><div class="line" id="LC39">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC40">	<span class="nx">_options</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Object</span><span class="o">,</span></div><div class="line" id="LC41">&nbsp;</div><div class="line" id="LC42">	<span class="nx">setOptions</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC43">		<span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">,</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{});</span></div><div class="line" id="LC44">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC45">&nbsp;</div><div class="line" id="LC46">	<span class="nx">_init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC47">		<span class="c">// Setting up original options with default options</span></div><div class="line" id="LC48">		<span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span></div><div class="line" id="LC49">		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span></div><div class="line" id="LC50">&nbsp;</div><div class="line" id="LC51">		<span class="c">//Creating the overlay</span></div><div class="line" id="LC52">		<span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_overlay&quot;</span><span class="o">,</span> <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;opacity: 0&quot;</span> <span class="p">});</span></div><div class="line" id="LC53">&nbsp;</div><div class="line" id="LC54">		<span class="c">//Creating the modal window</span></div><div class="line" id="LC55">		<span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_window&quot;</span><span class="o">,</span> <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;display: none&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span></div><div class="line" id="LC56">			<span class="k">this</span><span class="p">.</span><span class="nx">MBframe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_frame&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span></div><div class="line" id="LC57">				<span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_header&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span></div><div class="line" id="LC58">					<span class="k">this</span><span class="p">.</span><span class="nx">MBcaption</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_caption&quot;</span><span class="p">})</span></div><div class="line" id="LC59">				<span class="p">)</span></div><div class="line" id="LC60">			<span class="p">)</span></div><div class="line" id="LC61">		<span class="p">);</span></div><div class="line" id="LC62">		<span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_close&quot;</span><span class="o">,</span> <span class="nx">title</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">closeString</span><span class="o">,</span> <span class="nx">href</span><span class="o">:</span> <span class="s2">&quot;#&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span><span class="s2">&quot;&lt;span&gt;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">closeValue</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">);</span></div><div class="line" id="LC63">		<span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s1">&#39;bottom&#39;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">});</span></div><div class="line" id="LC64">&nbsp;</div><div class="line" id="LC65">		<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_content&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span></div><div class="line" id="LC66">			<span class="k">this</span><span class="p">.</span><span class="nx">MBloading</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;MB_loading&quot;</span><span class="p">}).</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">loadingString</span><span class="p">)</span></div><div class="line" id="LC67">		<span class="p">);</span></div><div class="line" id="LC68">		<span class="k">this</span><span class="p">.</span><span class="nx">MBframe</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s1">&#39;bottom&#39;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">});</span></div><div class="line" id="LC69">&nbsp;</div><div class="line" id="LC70">		<span class="c">// Inserting into DOM. If parameter set and form element have been found will inject into it. Otherwise will inject into body as topmost element.</span></div><div class="line" id="LC71">		<span class="c">// Be sure to set padding and marging to null via CSS for both body and (in case of asp.net) form elements. </span></div><div class="line" id="LC72">		<span class="kd">var</span> <span class="nx">injectToEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">aspnet</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">down</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span></div><div class="line" id="LC73">		<span class="nx">injectToEl</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s1">&#39;top&#39;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">});</span></div><div class="line" id="LC74">		<span class="nx">injectToEl</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s1">&#39;top&#39;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">});</span></div><div class="line" id="LC75">&nbsp;</div><div class="line" id="LC76">		<span class="c">// Initial scrolling position of the window. To be used for remove scrolling effect during ModalBox appearing</span></div><div class="line" id="LC77">		<span class="k">this</span><span class="p">.</span><span class="nx">initScrollX</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">;</span></div><div class="line" id="LC78">		<span class="k">this</span><span class="p">.</span><span class="nx">initScrollY</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">;</span></div><div class="line" id="LC79">&nbsp;</div><div class="line" id="LC80">		<span class="c">//Adding event observers</span></div><div class="line" id="LC81">		<span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hide</span><span class="p">.</span><span class="nx">bindAsEventListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></div><div class="line" id="LC82">		<span class="k">this</span><span class="p">.</span><span class="nx">kbdObserver</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_kbdHandler</span><span class="p">.</span><span class="nx">bindAsEventListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></div><div class="line" id="LC83">		<span class="k">this</span><span class="p">.</span><span class="nx">_initObservers</span><span class="p">();</span></div><div class="line" id="LC84">&nbsp;</div><div class="line" id="LC85">		<span class="k">this</span><span class="p">.</span><span class="nx">initialized</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c">// Mark as initialized</span></div><div class="line" id="LC86">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC87">&nbsp;</div><div class="line" id="LC88">	<span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="o">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC89">		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">initialized</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_init</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span> <span class="c">// Check for is already initialized</span></div><div class="line" id="LC90">&nbsp;</div><div class="line" id="LC91">		<span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="nx">content</span><span class="o">;</span></div><div class="line" id="LC92">		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span></div><div class="line" id="LC93">&nbsp;</div><div class="line" id="LC94">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="c">// Updating title of the MB</span></div><div class="line" id="LC95">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcaption</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span></div><div class="line" id="LC96">		<span class="k">else</span> <span class="p">{</span> <span class="c">// If title isn&#39;t given, the header will not displayed</span></div><div class="line" id="LC97">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC98">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcaption</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC99">		<span class="p">}</span></div><div class="line" id="LC100">&nbsp;</div><div class="line" id="LC101">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="c">// First modal box appearing</span></div><div class="line" id="LC102">			<span class="k">this</span><span class="p">.</span><span class="nx">_appear</span><span class="p">();</span></div><div class="line" id="LC103">			<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;onShow&quot;</span><span class="p">);</span> <span class="c">// Passing onShow callback</span></div><div class="line" id="LC104">		<span class="p">}</span></div><div class="line" id="LC105">		<span class="k">else</span> <span class="p">{</span> <span class="c">// If MB already on the screen, update it</span></div><div class="line" id="LC106">			<span class="k">this</span><span class="p">.</span><span class="nx">_update</span><span class="p">();</span></div><div class="line" id="LC107">			<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;onUpdate&quot;</span><span class="p">);</span> <span class="c">// Passing onUpdate callback</span></div><div class="line" id="LC108">		<span class="p">}</span> </div><div class="line" id="LC109">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC110">&nbsp;</div><div class="line" id="LC111">	<span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span> <span class="c">// External hide method to use from external HTML and JS</span></div><div class="line" id="LC112">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">initialized</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC113">			<span class="c">// Reading for options/callbacks except if event given as a pararmeter</span></div><div class="line" id="LC114">			<span class="k">if</span><span class="p">(</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">element</span> <span class="o">!=</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">,</span> <span class="nx">options</span><span class="p">);</span> </div><div class="line" id="LC115">			<span class="c">// Passing beforeHide callback</span></div><div class="line" id="LC116">			<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;beforeHide&quot;</span><span class="p">);</span></div><div class="line" id="LC117">			<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span><span class="p">)</span></div><div class="line" id="LC118">				<span class="nx">Effect</span><span class="p">.</span><span class="nx">SlideUp</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="o">,</span> <span class="p">{</span> <span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">slideUpDuration</span><span class="o">,</span> <span class="nx">transition</span><span class="o">:</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">.</span><span class="nx">sinoidal</span><span class="o">,</span> <span class="nx">afterFinish</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_deinit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">}</span> <span class="p">);</span></div><div class="line" id="LC119">			<span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC120">				<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC121">				<span class="k">this</span><span class="p">.</span><span class="nx">_deinit</span><span class="p">();</span></div><div class="line" id="LC122">			<span class="p">}</span></div><div class="line" id="LC123">		<span class="p">}</span> <span class="k">else</span> <span class="k">throw</span><span class="p">(</span><span class="s2">&quot;Modalbox is not initialized.&quot;</span><span class="p">);</span></div><div class="line" id="LC124">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC125">&nbsp;</div><div class="line" id="LC126">	<span class="nx">_hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span> <span class="c">// Internal hide method to use with overlay and close link</span></div><div class="line" id="LC127">		<span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span> <span class="c">// Stop event propaganation for link elements</span></div><div class="line" id="LC128">		<span class="c">/* Then clicked on overlay we&#39;ll check the option and in case of overlayClose == false we&#39;ll break hiding execution [Fix for #139] */</span></div><div class="line" id="LC129">		<span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">element</span><span class="p">().</span><span class="nx">id</span> <span class="o">==</span> <span class="s1">&#39;MB_overlay&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayClose</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span></div><div class="line" id="LC130">		<span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC131">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC132">&nbsp;</div><div class="line" id="LC133">	<span class="nx">alert</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">){</span></div><div class="line" id="LC134">		<span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;MB_alert&quot;&gt;&lt;p&gt;&#39;</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s1">&#39;&lt;/p&gt;&lt;input type=&quot;button&quot; onclick=&quot;Modalbox.hide()&quot; value=&quot;OK&quot; /&gt;&lt;/div&gt;&#39;</span><span class="o">;</span></div><div class="line" id="LC135">		<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">html</span><span class="o">,</span> <span class="p">{</span><span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Alert: &#39;</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="o">,</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">300</span><span class="p">});</span></div><div class="line" id="LC136">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC137">&nbsp;</div><div class="line" id="LC138">	<span class="nx">_appear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c">// First appearing of MB</span></div><div class="line" id="LC139">		<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">IE</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">appVersion</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\b7.0\b/</span><span class="p">))</span> <span class="p">{</span> <span class="c">// Preparing IE 6 for showing modalbox</span></div><div class="line" id="LC140">			<span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="p">);</span></div><div class="line" id="LC141">			<span class="k">this</span><span class="p">.</span><span class="nx">_prepareIE</span><span class="p">(</span><span class="s2">&quot;100%&quot;</span><span class="o">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span> </div><div class="line" id="LC142">		<span class="p">}</span></div><div class="line" id="LC143">		<span class="k">this</span><span class="p">.</span><span class="nx">_setWidth</span><span class="p">();</span></div><div class="line" id="LC144">		<span class="k">this</span><span class="p">.</span><span class="nx">_setPosition</span><span class="p">();</span></div><div class="line" id="LC145">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC146">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span><span class="p">});</span></div><div class="line" id="LC147">			<span class="k">new</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Fade</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="o">,</span> <span class="p">{</span></div><div class="line" id="LC148">					<span class="nx">from</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span> </div><div class="line" id="LC149">					<span class="nx">to</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayOpacity</span><span class="o">,</span> </div><div class="line" id="LC150">					<span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayDuration</span><span class="o">,</span> </div><div class="line" id="LC151">					<span class="nx">afterFinish</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC152">						<span class="k">new</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">SlideDown</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="o">,</span> <span class="p">{</span></div><div class="line" id="LC153">							<span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">slideDownDuration</span><span class="o">,</span> </div><div class="line" id="LC154">							<span class="nx">transition</span><span class="o">:</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">.</span><span class="nx">sinoidal</span><span class="o">,</span> </div><div class="line" id="LC155">							<span class="nx">afterFinish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> </div><div class="line" id="LC156">								<span class="k">this</span><span class="p">.</span><span class="nx">_setPosition</span><span class="p">();</span> </div><div class="line" id="LC157">								<span class="k">this</span><span class="p">.</span><span class="nx">loadContent</span><span class="p">();</span></div><div class="line" id="LC158">							<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span></div><div class="line" id="LC159">						<span class="p">});</span></div><div class="line" id="LC160">					<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span></div><div class="line" id="LC161">			<span class="p">});</span></div><div class="line" id="LC162">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC163">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayOpacity</span><span class="p">});</span></div><div class="line" id="LC164">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span></div><div class="line" id="LC165">			<span class="k">this</span><span class="p">.</span><span class="nx">_setPosition</span><span class="p">();</span> </div><div class="line" id="LC166">			<span class="k">this</span><span class="p">.</span><span class="nx">loadContent</span><span class="p">();</span></div><div class="line" id="LC167">		<span class="p">}</span></div><div class="line" id="LC168">		<span class="k">this</span><span class="p">.</span><span class="nx">_setWidthAndPosition</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_setWidthAndPosition</span><span class="p">.</span><span class="nx">bindAsEventListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></div><div class="line" id="LC169">		<span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">window</span><span class="o">,</span> <span class="s2">&quot;resize&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_setWidthAndPosition</span><span class="p">);</span></div><div class="line" id="LC170">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC171">&nbsp;</div><div class="line" id="LC172">	<span class="nx">resize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">byWidth</span><span class="o">,</span> <span class="nx">byHeight</span><span class="o">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span> <span class="c">// Change size of MB without loading content</span></div><div class="line" id="LC173">		<span class="kd">var</span> <span class="nx">oWidth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">getWidth</span><span class="p">();</span></div><div class="line" id="LC174">		<span class="kd">var</span> <span class="nx">wHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">();</span></div><div class="line" id="LC175">		<span class="kd">var</span> <span class="nx">wWidth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getWidth</span><span class="p">();</span></div><div class="line" id="LC176">		<span class="kd">var</span> <span class="nx">hHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">();</span></div><div class="line" id="LC177">		<span class="kd">var</span> <span class="nx">cHeight</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">();</span></div><div class="line" id="LC178">		<span class="kd">var</span> <span class="nx">newHeight</span> <span class="o">=</span> <span class="p">((</span><span class="nx">wHeight</span> <span class="o">-</span> <span class="nx">hHeight</span> <span class="o">+</span> <span class="nx">byHeight</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">cHeight</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">cHeight</span> <span class="o">+</span> <span class="nx">hHeight</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">wHeight</span> <span class="o">+</span> <span class="nx">byHeight</span><span class="p">);</span></div><div class="line" id="LC179">		<span class="kd">var</span> <span class="nx">newWidth</span> <span class="o">=</span> <span class="nx">wWidth</span> <span class="o">+</span> <span class="nx">byWidth</span><span class="o">;</span></div><div class="line" id="LC180">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">newWidth</span><span class="o">;</span></div><div class="line" id="LC181">		<span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span> <span class="c">// Passing callbacks</span></div><div class="line" id="LC182">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC183">			<span class="k">new</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Morph</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="o">,</span> <span class="p">{</span></div><div class="line" id="LC184">				<span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;width:&quot;</span> <span class="o">+</span> <span class="nx">newWidth</span> <span class="o">+</span> <span class="s2">&quot;px; height:&quot;</span> <span class="o">+</span> <span class="nx">newHeight</span> <span class="o">+</span> <span class="s2">&quot;px; left:&quot;</span> <span class="o">+</span> <span class="p">((</span><span class="nx">oWidth</span> <span class="o">-</span> <span class="nx">newWidth</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="o">,</span></div><div class="line" id="LC185">				<span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">resizeDuration</span><span class="o">,</span> </div><div class="line" id="LC186">				<span class="nx">beforeStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fx</span><span class="p">){</span></div><div class="line" id="LC187">					<span class="nx">fx</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">overflow</span><span class="o">:</span><span class="s2">&quot;hidden&quot;</span><span class="p">});</span> <span class="c">// Fix for MSIE 6 to resize correctly</span></div><div class="line" id="LC188">				<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC189">				<span class="nx">afterFinish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fx</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC190">					<span class="nx">fx</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">overflow</span><span class="o">:</span><span class="s2">&quot;visible&quot;</span><span class="p">});</span></div><div class="line" id="LC191">					<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;_afterResize&quot;</span><span class="p">);</span> <span class="c">// Passing internal callback</span></div><div class="line" id="LC192">					<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;afterResize&quot;</span><span class="p">);</span> <span class="c">// Passing callback</span></div><div class="line" id="LC193">				<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span></div><div class="line" id="LC194">			<span class="p">});</span></div><div class="line" id="LC195">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC196">			<span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span> <span class="nx">newWidth</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="o">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">newHeight</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span></div><div class="line" id="LC197">			<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC198">				<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;_afterResize&quot;</span><span class="p">);</span> <span class="c">// Passing internal callback</span></div><div class="line" id="LC199">				<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;afterResize&quot;</span><span class="p">);</span> <span class="c">// Passing callback</span></div><div class="line" id="LC200">			<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">,</span> <span class="mi">1</span><span class="p">);</span></div><div class="line" id="LC201">		<span class="p">}</span></div><div class="line" id="LC202">&nbsp;</div><div class="line" id="LC203">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC204">&nbsp;</div><div class="line" id="LC205">	<span class="nx">resizeToContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span></div><div class="line" id="LC206">&nbsp;</div><div class="line" id="LC207">		<span class="c">// Resizes the modalbox window to the actual content height.</span></div><div class="line" id="LC208">		<span class="c">// This might be useful to resize modalbox after some content modifications which were changed ccontent height.</span></div><div class="line" id="LC209">&nbsp;</div><div class="line" id="LC210">		<span class="kd">var</span> <span class="nx">byHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">();</span></div><div class="line" id="LC211">		<span class="k">if</span><span class="p">(</span><span class="nx">byHeight</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC212">			<span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span> <span class="c">// Passing callbacks</span></div><div class="line" id="LC213">			<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="nx">byHeight</span><span class="p">);</span></div><div class="line" id="LC214">		<span class="p">}</span></div><div class="line" id="LC215">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC216">&nbsp;</div><div class="line" id="LC217">	<span class="nx">resizeToInclude</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="o">,</span> <span class="nx">options</span><span class="p">){</span></div><div class="line" id="LC218">&nbsp;</div><div class="line" id="LC219">		<span class="c">// Resizes the modalbox window to the camulative height of element. Calculations are using CSS properties for margins and border.</span></div><div class="line" id="LC220">		<span class="c">// This method might be useful to resize modalbox before including or updating content.</span></div><div class="line" id="LC221">&nbsp;</div><div class="line" id="LC222">		<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span></div><div class="line" id="LC223">		<span class="kd">var</span> <span class="nx">elHeight</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">getHeight</span><span class="p">()</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">)</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;margin-bottom&#39;</span><span class="p">)</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;border-top-width&#39;</span><span class="p">)</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;border-bottom-width&#39;</span><span class="p">)</span><span class="o">,</span> <span class="mi">0</span><span class="p">);</span></div><div class="line" id="LC224">		<span class="k">if</span><span class="p">(</span><span class="nx">elHeight</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC225">			<span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span> <span class="c">// Passing callbacks</span></div><div class="line" id="LC226">			<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="nx">elHeight</span><span class="p">);</span></div><div class="line" id="LC227">		<span class="p">}</span></div><div class="line" id="LC228">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC229">&nbsp;</div><div class="line" id="LC230">	<span class="nx">_update</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c">// Updating MB in case of wizards</span></div><div class="line" id="LC231">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBloading</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">loadingString</span><span class="p">));</span></div><div class="line" id="LC232">		<span class="k">this</span><span class="p">.</span><span class="nx">loadContent</span><span class="p">();</span></div><div class="line" id="LC233">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC234">&nbsp;</div><div class="line" id="LC235">	<span class="nx">loadContent</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC236">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;beforeLoad&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span> <span class="c">// If callback passed false, skip loading of the content</span></div><div class="line" id="LC237">			<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC238">				<span class="kd">var</span> <span class="nx">htmlRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/&lt;\/?[^&gt;]+&gt;/gi</span><span class="p">);</span></div><div class="line" id="LC239">				<span class="k">if</span><span class="p">(</span><span class="nx">htmlRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">))</span> <span class="p">{</span> <span class="c">// Plain HTML given as a parameter</span></div><div class="line" id="LC240">					<span class="k">this</span><span class="p">.</span><span class="nx">_insertContent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">stripScripts</span><span class="p">()</span><span class="o">,</span> <span class="kd">function</span><span class="p">(){</span></div><div class="line" id="LC241">						<span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">extractScripts</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span> <span class="p">{</span> </div><div class="line" id="LC242">							<span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;&lt;!--&quot;</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;// --&gt;&quot;</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">));</span></div><div class="line" id="LC243">						<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">window</span><span class="p">));</span></div><div class="line" id="LC244">					<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span></div><div class="line" id="LC245">				<span class="p">}</span> <span class="k">else</span> <span class="c">// URL given as a parameter. We&#39;ll request it via Ajax</span></div><div class="line" id="LC246">					<span class="k">new</span> <span class="nx">Ajax</span><span class="p">.</span><span class="nx">Request</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="o">,</span> <span class="p">{</span> <span class="nx">method</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">method</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">,</span> <span class="nx">parameters</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">params</span><span class="o">,</span> </div><div class="line" id="LC247">						<span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transport</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC248">							<span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="nx">transport</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span></div><div class="line" id="LC249">							<span class="k">this</span><span class="p">.</span><span class="nx">_insertContent</span><span class="p">(</span><span class="nx">transport</span><span class="p">.</span><span class="nx">responseText</span><span class="p">.</span><span class="nx">stripScripts</span><span class="p">()</span><span class="o">,</span> <span class="kd">function</span><span class="p">(){</span></div><div class="line" id="LC250">								<span class="nx">response</span><span class="p">.</span><span class="nx">extractScripts</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">script</span><span class="p">)</span> <span class="p">{</span> </div><div class="line" id="LC251">									<span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">script</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;&lt;!--&quot;</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;// --&gt;&quot;</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">));</span></div><div class="line" id="LC252">								<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">window</span><span class="p">));</span></div><div class="line" id="LC253">							<span class="p">});</span></div><div class="line" id="LC254">						<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">,</span></div><div class="line" id="LC255">						<span class="nx">onException</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">instance</span><span class="o">,</span> <span class="nx">exception</span><span class="p">){</span></div><div class="line" id="LC256">							<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC257">							<span class="k">throw</span><span class="p">(</span><span class="s1">&#39;Modalbox Loading Error: &#39;</span> <span class="o">+</span> <span class="nx">exception</span><span class="p">);</span></div><div class="line" id="LC258">						<span class="p">}</span></div><div class="line" id="LC259">					<span class="p">});</span></div><div class="line" id="LC260">&nbsp;</div><div class="line" id="LC261">			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span><span class="c">// HTML Object is given</span></div><div class="line" id="LC262">				<span class="k">this</span><span class="p">.</span><span class="nx">_insertContent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span></div><div class="line" id="LC263">			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC264">				<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC265">				<span class="k">throw</span><span class="p">(</span><span class="s1">&#39;Modalbox Parameters Error: Please specify correct URL or HTML element (plain HTML or object)&#39;</span><span class="p">);</span></div><div class="line" id="LC266">			<span class="p">}</span></div><div class="line" id="LC267">		<span class="p">}</span></div><div class="line" id="LC268">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC269">&nbsp;</div><div class="line" id="LC270">	<span class="nx">_insertContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="o">,</span> <span class="nx">callback</span><span class="p">){</span></div><div class="line" id="LC271">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">).</span><span class="nx">hide</span><span class="p">().</span><span class="nx">update</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span></div><div class="line" id="LC272">		<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">content</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="c">// Plain HTML is given</span></div><div class="line" id="LC273">			<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="o">,</span> <span class="p">{</span> <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;display: none&quot;</span> <span class="p">}).</span><span class="nx">update</span><span class="p">(</span><span class="nx">content</span><span class="p">)).</span><span class="nx">down</span><span class="p">().</span><span class="nx">show</span><span class="p">();</span></div><div class="line" id="LC274">		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">content</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="c">// HTML Object is given</span></div><div class="line" id="LC275">			<span class="kd">var</span> <span class="nx">_htmlObj</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c">// If node already a part of DOM we&#39;ll clone it</span></div><div class="line" id="LC276">			<span class="c">// If clonable element has ID attribute defined, modifying it to prevent duplicates</span></div><div class="line" id="LC277">			<span class="k">if</span><span class="p">(</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="nx">content</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;MB_&quot;</span> <span class="o">+</span> <span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="o">;</span></div><div class="line" id="LC278">			<span class="c">/* Add prefix for IDs on all elements inside the DOM node */</span></div><div class="line" id="LC279">			<span class="nx">$</span><span class="p">(</span><span class="nx">content</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;*[id]&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span> <span class="nx">el</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;MB_&quot;</span> <span class="o">+</span> <span class="nx">el</span><span class="p">.</span><span class="nx">id</span><span class="o">;</span> <span class="p">});</span></div><div class="line" id="LC280">			<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">_htmlObj</span><span class="p">).</span><span class="nx">down</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span></div><div class="line" id="LC281">			<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">IE</span><span class="p">)</span> <span class="c">// Toggling back visibility for hidden selects in IE</span></div><div class="line" id="LC282">				<span class="nx">$$</span><span class="p">(</span><span class="s2">&quot;#MB_content select&quot;</span><span class="p">).</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;setStyle&#39;</span><span class="o">,</span> <span class="p">{</span><span class="s1">&#39;visibility&#39;</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">});</span></div><div class="line" id="LC283">		<span class="p">}</span></div><div class="line" id="LC284">&nbsp;</div><div class="line" id="LC285">		<span class="c">// Prepare and resize modal box for content</span></div><div class="line" id="LC286">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">height</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC287">			<span class="nx">Modalbox</span><span class="p">.</span><span class="nx">resize</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getWidth</span><span class="p">())</span><span class="o">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">()</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">()</span><span class="o">,</span> <span class="p">{</span></div><div class="line" id="LC288">				<span class="nx">afterResize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></div><div class="line" id="LC289">					<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="c">// MSIE fix</span></div><div class="line" id="LC290">						<span class="k">this</span><span class="p">.</span><span class="nx">_putContent</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span></div><div class="line" id="LC291">					<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">,</span><span class="mi">1</span><span class="p">);</span></div><div class="line" id="LC292">				<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span></div><div class="line" id="LC293">			<span class="p">});</span></div><div class="line" id="LC294">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c">// Height is defined. Creating a scrollable window</span></div><div class="line" id="LC295">			<span class="k">this</span><span class="p">.</span><span class="nx">_setWidth</span><span class="p">();</span></div><div class="line" id="LC296">			<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">overflow</span><span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="o">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBheader</span><span class="p">).</span><span class="nx">getHeight</span><span class="p">()</span> <span class="o">-</span> <span class="mi">13</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">});</span></div><div class="line" id="LC297">			<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="c">// MSIE fix</span></div><div class="line" id="LC298">				<span class="k">this</span><span class="p">.</span><span class="nx">_putContent</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span></div><div class="line" id="LC299">			<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">,</span><span class="mi">1</span><span class="p">);</span></div><div class="line" id="LC300">		<span class="p">}</span></div><div class="line" id="LC301">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC302">&nbsp;</div><div class="line" id="LC303">	<span class="nx">_putContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span></div><div class="line" id="LC304">		<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span></div><div class="line" id="LC305">		<span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_findFocusableElements</span><span class="p">();</span></div><div class="line" id="LC306">		<span class="k">this</span><span class="p">.</span><span class="nx">_setFocus</span><span class="p">();</span> <span class="c">// Setting focus on first &#39;focusable&#39; element in content (input, select, textarea, link or button)</span></div><div class="line" id="LC307">		<span class="k">if</span><span class="p">(</span><span class="nx">callback</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span></div><div class="line" id="LC308">			<span class="nx">callback</span><span class="p">();</span> <span class="c">// Executing internal JS from loaded content</span></div><div class="line" id="LC309">		<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;afterLoad&quot;</span><span class="p">);</span> <span class="c">// Passing callback</span></div><div class="line" id="LC310">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC311">&nbsp;</div><div class="line" id="LC312">	<span class="nx">activate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span></div><div class="line" id="LC313">		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span></div><div class="line" id="LC314">		<span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span></div><div class="line" id="LC315">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">observe</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC316">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayClose</span><span class="p">)</span></div><div class="line" id="LC317">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">observe</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC318">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span></div><div class="line" id="LC319">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">inactiveFade</span><span class="p">)</span></div><div class="line" id="LC320">			<span class="k">new</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Appear</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="o">,</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">slideUpDuration</span><span class="p">});</span></div><div class="line" id="LC321">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC322">&nbsp;</div><div class="line" id="LC323">	<span class="nx">deactivate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC324">		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span></div><div class="line" id="LC325">		<span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span></div><div class="line" id="LC326">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">stopObserving</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC327">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayClose</span><span class="p">)</span></div><div class="line" id="LC328">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">stopObserving</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC329">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC330">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">inactiveFade</span><span class="p">)</span></div><div class="line" id="LC331">			<span class="k">new</span> <span class="nx">Effect</span><span class="p">.</span><span class="nx">Fade</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="o">,</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">slideUpDuration</span><span class="o">,</span> <span class="nx">to</span><span class="o">:</span> <span class="p">.</span><span class="mi">75</span><span class="p">});</span></div><div class="line" id="LC332">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC333">&nbsp;</div><div class="line" id="LC334">	<span class="nx">_initObservers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></div><div class="line" id="LC335">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">observe</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC336">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayClose</span><span class="p">)</span></div><div class="line" id="LC337">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">observe</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC338">		<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Gecko</span><span class="p">)</span></div><div class="line" id="LC339">			<span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="o">,</span> <span class="s2">&quot;keypress&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">kbdObserver</span><span class="p">);</span> <span class="c">// Gecko is moving focus a way too fast</span></div><div class="line" id="LC340">		<span class="k">else</span></div><div class="line" id="LC341">			<span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="o">,</span> <span class="s2">&quot;keydown&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">kbdObserver</span><span class="p">);</span> <span class="c">// All other browsers are okay with keydown</span></div><div class="line" id="LC342">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC343">&nbsp;</div><div class="line" id="LC344">	<span class="nx">_removeObservers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></div><div class="line" id="LC345">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">stopObserving</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC346">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayClose</span><span class="p">)</span></div><div class="line" id="LC347">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">stopObserving</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">hideObserver</span><span class="p">);</span></div><div class="line" id="LC348">		<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Gecko</span><span class="p">)</span></div><div class="line" id="LC349">			<span class="nx">Event</span><span class="p">.</span><span class="nx">stopObserving</span><span class="p">(</span><span class="nb">document</span><span class="o">,</span> <span class="s2">&quot;keypress&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">kbdObserver</span><span class="p">);</span></div><div class="line" id="LC350">		<span class="k">else</span></div><div class="line" id="LC351">			<span class="nx">Event</span><span class="p">.</span><span class="nx">stopObserving</span><span class="p">(</span><span class="nb">document</span><span class="o">,</span> <span class="s2">&quot;keydown&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">kbdObserver</span><span class="p">);</span></div><div class="line" id="LC352">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC353">&nbsp;</div><div class="line" id="LC354">	<span class="nx">_setFocus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> </div><div class="line" id="LC355">		<span class="c">/* Setting focus to the first &#39;focusable&#39; element which is one with tabindex = 1 or the first in the form loaded. */</span></div><div class="line" id="LC356">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">autoFocusing</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC357">			<span class="kd">var</span> <span class="nx">firstEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">){</span></div><div class="line" id="LC358">				<span class="k">return</span> <span class="nx">el</span><span class="p">.</span><span class="nx">tabIndex</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span></div><div class="line" id="LC359">			<span class="p">})</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span></div><div class="line" id="LC360">			<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">toArray</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">firstEl</span><span class="p">);</span></div><div class="line" id="LC361">			<span class="nx">firstEl</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span> <span class="c">// Focus on first focusable element except close button</span></div><div class="line" id="LC362">		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">visible</span><span class="p">())</span></div><div class="line" id="LC363">			<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBclose</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span> <span class="c">// If no focusable elements exist focus on close button</span></div><div class="line" id="LC364">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC365">&nbsp;</div><div class="line" id="LC366">	<span class="nx">_findFocusableElements</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="c">// Collect form elements or links from MB content</span></div><div class="line" id="LC367">		<span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;input:not([type~=hidden]), select, textarea, button, a[href]&#39;</span><span class="p">).</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;addClassName&#39;</span><span class="o">,</span> <span class="s1">&#39;MB_focusable&#39;</span><span class="p">);</span></div><div class="line" id="LC368">		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;.MB_focusable&#39;</span><span class="p">);</span></div><div class="line" id="LC369">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC370">&nbsp;</div><div class="line" id="LC371">	<span class="nx">_kbdHandler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC372">		<span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">element</span><span class="p">();</span></div><div class="line" id="LC373">		<span class="nx">switch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC374">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_TAB</span><span class="o">:</span></div><div class="line" id="LC375">				<span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></div><div class="line" id="LC376">&nbsp;</div><div class="line" id="LC377">				<span class="c">/* Switching currFocused to the element which was focused by mouse instead of TAB-key. Fix for #134 */</span> </div><div class="line" id="LC378">				<span class="k">if</span><span class="p">(</span><span class="nx">node</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span><span class="p">])</span></div><div class="line" id="LC379">					<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">toArray</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span></div><div class="line" id="LC380">&nbsp;</div><div class="line" id="LC381">				<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">)</span> <span class="p">{</span> <span class="c">//Focusing in direct order</span></div><div class="line" id="LC382">					<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC383">						<span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">focus</span><span class="p">();</span></div><div class="line" id="LC384">						<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span></div><div class="line" id="LC385">					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC386">						<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span><span class="o">++;</span></div><div class="line" id="LC387">						<span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span><span class="p">].</span><span class="nx">focus</span><span class="p">();</span></div><div class="line" id="LC388">					<span class="p">}</span></div><div class="line" id="LC389">				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c">// Shift key is pressed. Focusing in reverse order</span></div><div class="line" id="LC390">					<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC391">						<span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">last</span><span class="p">().</span><span class="nx">focus</span><span class="p">();</span></div><div class="line" id="LC392">						<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span></div><div class="line" id="LC393">					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC394">						<span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span><span class="o">--;</span></div><div class="line" id="LC395">						<span class="k">this</span><span class="p">.</span><span class="nx">focusableElements</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">currFocused</span><span class="p">].</span><span class="nx">focus</span><span class="p">();</span></div><div class="line" id="LC396">					<span class="p">}</span></div><div class="line" id="LC397">				<span class="p">}</span></div><div class="line" id="LC398">				<span class="k">break</span><span class="o">;</span>			</div><div class="line" id="LC399">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_ESC</span><span class="o">:</span></div><div class="line" id="LC400">				<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hide</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span></div><div class="line" id="LC401">				<span class="k">break</span><span class="o">;</span></div><div class="line" id="LC402">			<span class="nx">case</span> <span class="mi">32</span><span class="o">:</span></div><div class="line" id="LC403">				<span class="k">this</span><span class="p">.</span><span class="nx">_preventScroll</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span></div><div class="line" id="LC404">				<span class="k">break</span><span class="o">;</span></div><div class="line" id="LC405">			<span class="nx">case</span> <span class="mi">0</span><span class="o">:</span> <span class="c">// For Gecko browsers compatibility</span></div><div class="line" id="LC406">				<span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="mi">32</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_preventScroll</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span></div><div class="line" id="LC407">				<span class="k">break</span><span class="o">;</span></div><div class="line" id="LC408">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_UP</span><span class="o">:</span></div><div class="line" id="LC409">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_DOWN</span><span class="o">:</span></div><div class="line" id="LC410">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_PAGEDOWN</span><span class="o">:</span></div><div class="line" id="LC411">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_PAGEUP</span><span class="o">:</span></div><div class="line" id="LC412">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_HOME</span><span class="o">:</span></div><div class="line" id="LC413">			<span class="nx">case</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">KEY_END</span><span class="o">:</span></div><div class="line" id="LC414">				<span class="c">// Safari operates in slightly different way. This realization is still buggy in Safari.</span></div><div class="line" id="LC415">				<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">WebKit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">[</span><span class="s2">&quot;textarea&quot;</span><span class="o">,</span> <span class="s2">&quot;select&quot;</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()))</span></div><div class="line" id="LC416">					<span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></div><div class="line" id="LC417">				<span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="s2">&quot;submit&quot;</span><span class="o">,</span> <span class="s2">&quot;button&quot;</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="o">||</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="p">)</span></div><div class="line" id="LC418">					<span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></div><div class="line" id="LC419">				<span class="k">break</span><span class="o">;</span></div><div class="line" id="LC420">		<span class="p">}</span></div><div class="line" id="LC421">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC422">&nbsp;</div><div class="line" id="LC423">	<span class="nx">_preventScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span> <span class="c">// Disabling scrolling by &quot;space&quot; key</span></div><div class="line" id="LC424">		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="s2">&quot;input&quot;</span><span class="o">,</span> <span class="s2">&quot;textarea&quot;</span><span class="o">,</span> <span class="s2">&quot;select&quot;</span><span class="o">,</span> <span class="s2">&quot;button&quot;</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">element</span><span class="p">().</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()))</span> </div><div class="line" id="LC425">			<span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></div><div class="line" id="LC426">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC427">&nbsp;</div><div class="line" id="LC428">	<span class="nx">_deinit</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span></div><div class="line" id="LC429">	<span class="p">{</span>	</div><div class="line" id="LC430">		<span class="k">this</span><span class="p">.</span><span class="nx">_removeObservers</span><span class="p">();</span></div><div class="line" id="LC431">		<span class="nx">Event</span><span class="p">.</span><span class="nx">stopObserving</span><span class="p">(</span><span class="nb">window</span><span class="o">,</span> <span class="s2">&quot;resize&quot;</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_setWidthAndPosition</span> <span class="p">);</span></div><div class="line" id="LC432">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitions</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC433">			<span class="nx">Effect</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="o">,</span> <span class="s1">&#39;appear&#39;</span><span class="o">,</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overlayDuration</span><span class="o">,</span> <span class="nx">afterFinish</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_removeElements</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">});</span></div><div class="line" id="LC434">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="LC435">			<span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span></div><div class="line" id="LC436">			<span class="k">this</span><span class="p">.</span><span class="nx">_removeElements</span><span class="p">();</span></div><div class="line" id="LC437">		<span class="p">}</span></div><div class="line" id="LC438">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBcontent</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">overflow</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nx">height</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">});</span></div><div class="line" id="LC439">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC440">&nbsp;</div><div class="line" id="LC441">	<span class="nx">_removeElements</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC442">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span></div><div class="line" id="LC443">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span></div><div class="line" id="LC444">		<span class="k">if</span><span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">IE</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">appVersion</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\b7.0\b/</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="LC445">			<span class="k">this</span><span class="p">.</span><span class="nx">_prepareIE</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span> <span class="c">// If set to auto MSIE will show horizontal scrolling</span></div><div class="line" id="LC446">			<span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">initScrollX</span><span class="o">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">initScrollY</span><span class="p">);</span></div><div class="line" id="LC447">		<span class="p">}</span></div><div class="line" id="LC448">&nbsp;</div><div class="line" id="LC449">		<span class="c">/* Replacing prefixes &#39;MB_&#39; in IDs for the original content */</span></div><div class="line" id="LC450">		<span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC451">			<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/MB_/</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="LC452">				<span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/MB_/</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span></div><div class="line" id="LC453">			<span class="p">}</span></div><div class="line" id="LC454">			<span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">&#39;*[id]&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span> <span class="nx">el</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/MB_/</span><span class="o">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span> <span class="p">});</span></div><div class="line" id="LC455">		<span class="p">}</span></div><div class="line" id="LC456">		<span class="c">/* Initialized will be set to false */</span></div><div class="line" id="LC457">		<span class="k">this</span><span class="p">.</span><span class="nx">initialized</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span></div><div class="line" id="LC458">		<span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s2">&quot;afterHide&quot;</span><span class="p">);</span> <span class="c">// Passing afterHide callback</span></div><div class="line" id="LC459">		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_options</span><span class="p">);</span> <span class="c">//Settings options object into intial state</span></div><div class="line" id="LC460">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC461">&nbsp;</div><div class="line" id="LC462">	<span class="nx">_setWidth</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c">//Set size</span></div><div class="line" id="LC463">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="o">,</span> <span class="nx">height</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span></div><div class="line" id="LC464">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC465">&nbsp;</div><div class="line" id="LC466">	<span class="nx">_setPosition</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC467">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">left</span><span class="o">:</span> <span class="p">((</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBoverlay</span><span class="p">).</span><span class="nx">getWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">getWidth</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span></div><div class="line" id="LC468">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC469">&nbsp;</div><div class="line" id="LC470">	<span class="nx">_setWidthAndPosition</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></div><div class="line" id="LC471">		<span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">MBwindow</span><span class="p">).</span><span class="nx">setStyle</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span></div><div class="line" id="LC472">		<span class="k">this</span><span class="p">.</span><span class="nx">_setPosition</span><span class="p">();</span></div><div class="line" id="LC473">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC474">&nbsp;</div><div class="line" id="LC475">	<span class="nx">_getScrollTop</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c">//From: http://www.quirksmode.org/js/doctypes.html</span></div><div class="line" id="LC476">		<span class="kd">var</span> <span class="nx">theTop</span><span class="o">;</span></div><div class="line" id="LC477">		<span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)</span></div><div class="line" id="LC478">			<span class="nx">theTop</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">;</span></div><div class="line" id="LC479">		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span></div><div class="line" id="LC480">			<span class="nx">theTop</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">;</span></div><div class="line" id="LC481">		<span class="k">return</span> <span class="nx">theTop</span><span class="o">;</span></div><div class="line" id="LC482">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC483">	<span class="nx">_prepareIE</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">height</span><span class="o">,</span> <span class="nx">overflow</span><span class="p">){</span></div><div class="line" id="LC484">		<span class="nx">$$</span><span class="p">(</span><span class="s1">&#39;html, body&#39;</span><span class="p">).</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;setStyle&#39;</span><span class="o">,</span> <span class="p">{</span><span class="nx">width</span><span class="o">:</span> <span class="nx">height</span><span class="o">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">height</span><span class="o">,</span> <span class="nx">overflow</span><span class="o">:</span> <span class="nx">overflow</span><span class="p">});</span> <span class="c">// IE requires width and height set to 100% and overflow hidden</span></div><div class="line" id="LC485">		<span class="nx">$$</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">).</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;setStyle&#39;</span><span class="o">,</span> <span class="p">{</span><span class="s1">&#39;visibility&#39;</span><span class="o">:</span> <span class="nx">overflow</span><span class="p">});</span> <span class="c">// Toggle visibility for all selects in the common document</span></div><div class="line" id="LC486">	<span class="p">}</span><span class="o">,</span></div><div class="line" id="LC487">	<span class="nx">event</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">eventName</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="LC488">		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">eventName</span><span class="p">])</span> <span class="p">{</span></div><div class="line" id="LC489">			<span class="kd">var</span> <span class="nx">returnValue</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]();</span> <span class="c">// Executing callback</span></div><div class="line" id="LC490">			<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c">// Removing callback after execution</span></div><div class="line" id="LC491">			<span class="k">if</span><span class="p">(</span><span class="nx">returnValue</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> </div><div class="line" id="LC492">				<span class="k">return</span> <span class="nx">returnValue</span><span class="o">;</span></div><div class="line" id="LC493">			<span class="k">else</span> </div><div class="line" id="LC494">				<span class="k">return</span> <span class="kc">true</span><span class="o">;</span></div><div class="line" id="LC495">		<span class="p">}</span></div><div class="line" id="LC496">		<span class="k">return</span> <span class="kc">true</span><span class="o">;</span></div><div class="line" id="LC497">	<span class="p">}</span></div><div class="line" id="LC498"><span class="p">};</span></div><div class="line" id="LC499">&nbsp;</div><div class="line" id="LC500"><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Modalbox</span><span class="o">,</span> <span class="nx">Modalbox</span><span class="p">.</span><span class="nx">Methods</span><span class="p">);</span></div><div class="line" id="LC501">&nbsp;</div><div class="line" id="LC502"><span class="k">if</span><span class="p">(</span><span class="nx">Modalbox</span><span class="p">.</span><span class="nx">overrideAlert</span><span class="p">)</span> <span class="nb">window</span><span class="p">.</span><span class="nx">alert</span> <span class="o">=</span> <span class="nx">Modalbox</span><span class="p">.</span><span class="nx">alert</span><span class="o">;</span></div></pre></div>
            
          </td>
        </tr>
      </table>
    
  </div>


      </div>
    </div>
    
  


  </div>

      

      <div class="push"></div>
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog"><b>Blog</b></a> |
            <a href="http://support.github.com/">Support</a> |
            <a href="http://github.com/training">Training</a> |
            <a href="http://github.com/contact">Contact</a> |
            <a href="http://develop.github.com">API</a> |
            <a href="http://twitter.com/github">Status</a> |
            <a href="http://twitter.com/github">GitHub on Twitter</a> |
            <a href="http://github.com/guides/home">Help</a>

         </div>
          <div class="company">
            <span id="_rrt" title="2.07847s from xc88-s00009">GitHub</span>&trade;
            is <a href="http://logicalawesome.com/">Logical Awesome</a> &copy;2009 | <a href="/site/terms">Terms of Service</a> | <a href="/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com"><img src="/images/modules/footer/ey-rubyhosting.png" alt="Engine Yard" /></a>
        </div>
      </div>
    </div>

    <div id="coming_soon" style="display:none;">
      This feature is coming soon.  Sit tight!
    </div>

    
        <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-3769691-2");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>

    
  </body>
</html>

